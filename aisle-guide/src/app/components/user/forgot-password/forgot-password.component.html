<form [formGroup]="forgotForm">
    <div class="form-group">
        <label for="email">Email</label>
        <div class="input-button-group">
            <input class="form-control" id="email" type="email" formControlName="email" />
            <button class="btn-action" type="button" [disabled]="!forgotForm.get('email')?.valid || loading"
                (click)="sendValidationCode()">
                Send Code
            </button>
        </div>
    </div>

    <div class="form-group">
        <label for="code">Validation Code</label>
        <div class="input-button-group">
            <input class="form-control" id="code" type="text" formControlName="code" />
            <button class="btn-action" type="button" [disabled]="loading || codeValidated" (click)="validateCode()">
                Validate
            </button>
        </div>
    </div>

    @if(codeValidated) {
    <div class="form-group">
        <label for="newPassword">New Password</label>
        <input class="form-control" id="newPassword" type="password" formControlName="newPassword" />
    </div>
    }

    @if (codeValidated) {
    <div class="form-group">
        <label for="confirmPassword">Confirm New Password</label>
        <input class="form-control" id="confirmPassword" type="password" formControlName="confirmPassword" />
    </div>
    }

    <div class="form-buttons">
        <button class="btn-primary" type="button" [disabled]="loading || !codeValidated"
            (click)="updatePassword()">Update Password</button>
        <button class="btn-register" type="button" (click)="navigateToLogin()">Back to login</button>
    </div>

    @if(errorMessage) {
    <div class="error-message">{{ errorMessage }}</div>
    }
    @if (successMessage) {
    <div class="success-message">{{ successMessage }}</div>
    }
</form>